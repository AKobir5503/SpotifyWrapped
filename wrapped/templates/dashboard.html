{% extends "base_generic.html" %}

{% block content %}
<div class="dashboard-container">
    <h1>Welcome, {{ user.username }}!</h1>
    <p>Your personalized Spotify insights await.</p>

    <h2>Create a New Wrap</h2>
    <form method="GET" action="{% url 'generate-wrap' %}">
        {% csrf_token %}
        <label for="time-frame">Select a Time Frame:</label>
        <select id="time-frame" name="time_frame" class="form-select" required>
            <option value="short_term">Last 4 Weeks</option>
            <option value="medium_term">Last 6 Months</option>
            <option value="long_term">Last 1 Year</option>
        </select>
        <button type="submit" class="btn btn-primary mt-3">Generate Wrap</button>
    </form>

    <h2>Your Saved Wraps</h2>
    {% if saved_wraps %}
        <ul>
            {% for wrap in saved_wraps %}
                <li>
                    <a href="{{ wrap.url }}">{{ wrap.name }}</a>
                    - Created on {{ wrap.created_at|date:"M d, Y" }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You don't have any wraps saved yet. Start your first one above!</p>
    {% endif %}
</div>
{% endblock %}
